<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <img class="mask" src="/Images/mask.png" alt="" />
    <img
      src="/Images/necktrans.png"
      class="background-image"
      alt="Background"
    />
    <h2 class="header">Calicare Demo</h2>

        <div class="navi">
      <div class="navi-header">
        <div>
           <h3 class="header">Real-time Posture Tracking</h3> 
           <p style=" color: rgb(171, 171, 171);">Stay aware of your posture</p>
        </div>
        
         <span style="font-weight: bold; display: none;" id="usernameDisplay"></span>
      </div>
      <div class="navi-header">
        <a href="/profile">
          <img
            id="userPhoto"
            style="
              width: 40px;
              height: 40px;
              border-radius: 50%;
              object-fit: cover;  
              border: 2px solid #0F9894;
            "
          />
        </a>
        <!-- <a href="/profile" style="background-color: #006400">Profile</a> -->
        <!-- <a href="/logout" style="background-color: red">Logout</a> -->
      </div>
    </div>

    <div class="habit">
        <div>
            <h3>NeckGuard Device</h3>
            <p>Revolutionizing Posture Management</p>
        </div>
        <button class="btn-outline" onclick="window.location.href= 'learn.html'">learn More &gt;</button>
    </div>

    <div class="device">
        <img src="/Images/device.png" alt="">
        <p>Standard Edition</p>
        <h4>Bluetooth-enabled, Posture Tracking</h4>
    </div>

    <div class="device">
        <div class="product-card3">
          <div class="product-image2">
            <img src="/Images/device use.png" alt="">
            <p>Key Features</p>
          </div>
          <div class="product-text">
            <p>Pro Edition</p>
            <h3 style="color: black;">Advanced Metrics, Personalized Insights</h3>
          </div>

        </div>

    <script>
        fetch("/getProfile", {
        method: "GET",
        credentials: "include", // <-- This tells the browser to send cookies
      })
        .then((res) => {
          if (!res.ok) throw new Error("User not logged in");
          return res.json();
        })
        .then((user) => {
          document.getElementById("usernameDisplay").innerText = "Hello " + user.username;
          if (user.profile_picture) {
            // document.getElementById('userPhoto').src = '/uploads/' + user.profile_picture;
            document.getElementById("userPhoto").src = user.profile_picture;
          }
        })
        .catch((err) => {
          console.error("Profile fetch error:", err);
        });
    </script>


        <!-- ðŸŒ Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="index2.html" class="nav-item">
        <img src="Images/home.png" alt="Home" />
        <span>Home</span>
      </a>
      <a href="userdata2.html" class="nav-item">
        <img src="Images/data.png" alt="Data" />
        <span>Data Analytics</span>
      </a>
      <a href="Exercise.html" class="nav-item">
        <img src="Images/exercise.png" alt="Excercise" />
        <span>Exercise</span>
      </a>
      <a href="profile.html" class="nav-item active">
        <img src="Images/profile.png" alt="Profile" />
        <span>Profile</span>
      </a>
    </nav>

    <script>
      const currentPage = location.pathname.split("/").pop();
      document.querySelectorAll(".bottom-nav .nav-item").forEach((item) => {
        if (item.getAttribute("href") === currentPage) {
          item.classList.add("active");
        }
      });
    </script>

</body>
</html>